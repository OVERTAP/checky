name: mexc-session-bot-30min

on:
  schedule:
    - cron: "*/30 * * * *"   # 30ë¶„ ê°„ê²©(UTC)
  workflow_dispatch:
    inputs:
      first_run:
        description: "ìµœì´ˆ ì‹¤í–‰ í¬ë§·(0% | â€¦ | HHì‹œ)ë¡œ ë³´ë‚¼ë˜?"
        type: boolean
        required: false
        default: false

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - run: |
          python -m pip install --upgrade pip
          pip install ccxt requests python-dotenv
      - name: Run bot
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          WATCHLIST_PATH: "watchlist.json"
          TIMEFRAME: "5m"
          TOP_N: "999999"            # watchlist ì „ë¶€
          TREND_COUNT: "4"           # ë”± 4ì¹¸
          LINES_PER_MESSAGE: "9999"  # ê¸¸ì´ ê¸°ì¤€ ë¶„í• 
          DELTA_EMOJI_THRESH: "2.0"  # ğŸš€/ğŸ’¥ ì„ê³„
          # ìˆ˜ë™ ì‹¤í–‰ì—ì„œë§Œ ì²´í¬ê°’ì´ ë“¤ì–´ì˜¤ê³ , ìŠ¤ì¼€ì¤„ì—ì„  false â†’ ì´í›„ í¬ë§·
          FIRST_RUN: ${{ inputs.first_run }}
        run: python tmp.py
